<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ä¸€å¹´çº§æ•°å­¦ Â· ä¸–ç•Œä¸€ï¼šæ•°çš„ç‹å›½ï¼ˆ5åˆ1å°æ¸¸æˆï¼‰</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
      background: radial-gradient(circle at top, #0f172a, #020617 60%);
      color: #e5e7eb;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px 10px 40px;
    }
    .container { width: 100%; max-width: 960px; }
    a.back {
      display: inline-block;
      margin-bottom: 8px;
      font-size: 13px;
      color: #38bdf8;
      text-decoration: none;
    }
    a.back:hover { text-decoration: underline; }
    h1 { margin: 4px 0 4px; font-size: 24px; }
    .subtitle { font-size: 14px; color: #9ca3af; margin-bottom: 16px; }

    .card {
      background: rgba(15,23,42,0.96);
      border-radius: 18px;
      padding: 20px;
      box-shadow: 0 16px 40px rgba(15,23,42,0.9);
      border: 1px solid #1f2937;
    }

    /* æ¨¡å¼é€‰æ‹©æ¡ */
    .mode-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
    }
    .mode-btn {
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 13px;
      border: 1px solid #374151;
      background: #020617;
      color: #e5e7eb;
      cursor: pointer;
      transition: all .15s ease;
      white-space: nowrap;
    }
    .mode-btn:hover {
      background: #0b1120;
      border-color: #38bdf8;
    }
    .mode-btn.active {
      background: #2563eb;
      border-color: #60a5fa;
      color: #e5f0ff;
    }

    .game-section {
      display: none;
      margin-top: 8px;
    }
    .game-section.active {
      display: block;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 10px;
      font-size: 14px;
      color: #9ca3af;
    }

    .board {
      margin: 8px 0 14px;
      border-radius: 14px;
      border: 1px solid #1f2937;
      background: linear-gradient(to bottom, #020617, #020617);
      padding: 10px;
    }

    .emoji-grid {
      min-height: 80px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 34px;
    }

    .prompt {
      font-size: 15px;
      margin-bottom: 8px;
    }

    .num-grid {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 8px;
      margin-bottom: 6px;
    }
    .num-btn {
      border: 1px solid #1f2937;
      border-radius: 999px;
      padding: 8px 0;
      font-size: 16px;
      background: #020617;
      color: #e5e7eb;
      cursor: pointer;
      transition: all .15s ease;
    }
    .num-btn:hover {
      background: #0b1120;
      border-color: #38bdf8;
    }
    .num-btn.correct {
      background: #16a34a;
      border-color: #22c55e;
      color: #e5fdf0;
    }
    .num-btn.wrong {
      background: #7f1d1d;
      border-color: #ef4444;
      color: #fee2e2;
    }

    .feedback {
      min-height: 22px;
      font-size: 14px;
      margin-top: 4px;
    }
    .feedback.ok { color: #4ade80; }
    .feedback.bad { color: #fca5a5; }

    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-top: 10px;
      flex-wrap: wrap;
    }
    .btn {
      border-radius: 999px;
      padding: 6px 14px;
      font-size: 14px;
      border: none;
      cursor: pointer;
      transition: all .15s ease;
    }
    .btn-main {
      background: #2563eb;
      color: #fff;
    }
    .btn-main:disabled {
      background: #1f2937;
      color: #6b7280;
      cursor: not-allowed;
    }
    .btn-ghost {
      background: transparent;
      border: 1px solid #4b5563;
      color: #9ca3af;
    }

    .summary {
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: 10px;
      background: #020617;
      border: 1px solid #374151;
      font-size: 14px;
    }

    /* ç©æ³•ä¸‰ï¼šå·¦å³æ¯”è¾ƒ */
    .side-row {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
    }
    .side {
      flex: 1;
      min-width: 140px;
      border-radius: 12px;
      border: 1px solid #1f2937;
      padding: 6px 6px 10px;
      background: #020617;
    }
    .side-title {
      font-size: 13px;
      color: #9ca3af;
      margin-bottom: 4px;
    }

    /* ç©æ³•å››ï¼šè£…æ»¡ç¯®å­ */
    .basket-box {
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: center;
    }
    .basket {
      min-height: 70px;
      border-radius: 14px;
      border: 1px dashed #4b5563;
      padding: 10px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 6px;
      font-size: 32px;
    }
    .basket-info {
      font-size: 14px;
      color: #cbd5f5;
    }

    /* ç©æ³•äº”ï¼šæ•°å­—å°è·¯ */
    .number-path-grid {
      display: grid;
      grid-template-columns: repeat(5, minmax(0,1fr));
      gap: 8px;
    }
    .path-btn {
      border-radius: 10px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #e5e7eb;
      font-size: 16px;
      padding: 8px 0;
      cursor: pointer;
      transition: all .15s ease;
    }
    .path-btn.done {
      background: #16a34a;
      border-color: #22c55e;
      color: #e5fdf0;
    }
    .path-btn.wrong {
      background: #7f1d1d;
      border-color: #ef4444;
      color: #fee2e2;
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="math.html" class="back">âª è¿”å›æ•°å­¦å­¦ä¹ ä¸­å¿ƒ</a>

    <h1>ä¸€å¹´çº§æ•°å­¦ Â· ä¸–ç•Œä¸€ï¼šæ•°çš„ç‹å›½</h1>
    <div class="subtitle">
      æœ¬ä¸–ç•Œä¸€å…±æœ‰ <b>5 ç§ç©æ³•</b>ï¼šæ•°ä¸€æ•°ã€åªæ•°æŸä¸€ç§ã€è°æ›´å¤šã€è£…æ»¡ç¯®å­ã€æ•°å­—å°è·¯ã€‚è¯·é€‰æ‹©ä¸€ä¸ªç©æ³•å¼€å§‹é—¯å…³å§ï¼
    </div>

    <div class="card">
      <!-- æ¨¡å¼é€‰æ‹© -->
      <div class="mode-bar">
        <button class="mode-btn active" data-mode="1">ç©æ³•ä¸€ï¼šè¶£å‘³æ•°ä¸€æ•°</button>
        <button class="mode-btn" data-mode="2">ç©æ³•äºŒï¼šåªæ•°ç›®æ ‡å›¾æ¡ˆ</button>
        <button class="mode-btn" data-mode="3">ç©æ³•ä¸‰ï¼šè°æ›´å¤šï¼Ÿ</button>
        <button class="mode-btn" data-mode="4">ç©æ³•å››ï¼šè£…æ»¡ç¯®å­</button>
        <button class="mode-btn" data-mode="5">ç©æ³•äº”ï¼šæ•°å­—å°è·¯</button>
      </div>

      <!-- ç©æ³•ä¸€ï¼šæ•°ä¸€æ•° -->
      <section id="mode-1" class="game-section active">
        <div class="top-bar">
          <div>ç©æ³•ä¸€ï¼šè®¤çœŸæ•°ä¸€æ•°ï¼Œæœ‰å¤šå°‘ä¸ªç›¸åŒçš„å›¾æ¡ˆï¼Ÿ</div>
          <div>å½“å‰å¾—åˆ†ï¼š<span id="m1-score">0</span></div>
        </div>
        <div class="board">
          <div class="prompt" id="m1-prompt">çœ‹çœ‹ä¸‹é¢çš„å›¾æ¡ˆï¼Œä¸€å…±æœ‰å‡ ä¸ªï¼Ÿ</div>
          <div class="emoji-grid" id="m1-grid"></div>
        </div>
        <div class="prompt">è¯·ç‚¹å‡»ä½ æ•°åˆ°çš„æ•°å­—ï¼š</div>
        <div class="num-grid" id="m1-num-grid"></div>
        <div class="feedback" id="m1-feedback"></div>
        <div class="controls">
          <button class="btn btn-ghost" id="m1-restart">ğŸ” æ¢ä¸€é¢˜</button>
          <button class="btn btn-main" id="m1-next" disabled>ä¸‹ä¸€é¢˜ â–¶</button>
        </div>
      </section>

      <!-- ç©æ³•äºŒï¼šåªæ•°ç›®æ ‡å›¾æ¡ˆ -->
      <section id="mode-2" class="game-section">
        <div class="top-bar">
          <div>ç©æ³•äºŒï¼šåªæ•°ä»»åŠ¡å›¾æ¡ˆ</div>
          <div>å½“å‰å¾—åˆ†ï¼š<span id="m2-score">0</span></div>
        </div>
        <div class="board">
          <div class="prompt" id="m2-prompt">ä»»åŠ¡ï¼šåªæ•°å‡ºæœ‰å¤šå°‘ä¸ª ğŸ¶ï¼Ÿ</div>
          <div class="emoji-grid" id="m2-grid"></div>
        </div>
        <div class="prompt">åªæ•°ä»»åŠ¡å›¾æ¡ˆçš„æ•°é‡ï¼Œç‚¹å‡»æ­£ç¡®æ•°å­—ï¼š</div>
        <div class="num-grid" id="m2-num-grid"></div>
        <div class="feedback" id="m2-feedback"></div>
        <div class="controls">
          <button class="btn btn-ghost" id="m2-restart">ğŸ” æ¢ä¸€é¢˜</button>
          <button class="btn btn-main" id="m2-next" disabled>ä¸‹ä¸€é¢˜ â–¶</button>
        </div>
      </section>

      <!-- ç©æ³•ä¸‰ï¼šè°æ›´å¤šï¼Ÿ -->
      <section id="mode-3" class="game-section">
        <div class="top-bar">
          <div>ç©æ³•ä¸‰ï¼šè°çš„æ›´â€œå¤šâ€å‘¢ï¼Ÿ</div>
          <div>å½“å‰å¾—åˆ†ï¼š<span id="m3-score">0</span></div>
        </div>
        <div class="board">
          <div class="prompt" id="m3-prompt">å“ªä¸€è¾¹çš„å›¾æ¡ˆæ›´å¤šï¼Ÿç‚¹å·¦è¾¹æˆ–å³è¾¹ã€‚</div>
          <div class="side-row">
            <div class="side">
              <div class="side-title">å·¦è¾¹</div>
              <div class="emoji-grid" id="m3-left"></div>
            </div>
            <div class="side">
              <div class="side-title">å³è¾¹</div>
              <div class="emoji-grid" id="m3-right"></div>
            </div>
          </div>
        </div>
        <div class="prompt">è¯·é€‰æ‹©ä½ è§‰å¾—â€œæ›´å¤šâ€çš„ä¸€è¾¹ï¼š</div>
        <div style="display:flex; gap:8px; margin-bottom:6px; flex-wrap:wrap;">
          <button class="btn btn-main" id="m3-choose-left">å·¦è¾¹æ›´å¤š</button>
          <button class="btn btn-main" id="m3-choose-right">å³è¾¹æ›´å¤š</button>
        </div>
        <div class="feedback" id="m3-feedback"></div>
        <div class="controls">
          <button class="btn btn-ghost" id="m3-restart">ğŸ” æ¢ä¸€é¢˜</button>
          <button class="btn btn-main" id="m3-next" disabled>ä¸‹ä¸€é¢˜ â–¶</button>
        </div>
        <div class="summary" id="m3-summary" style="display:none;"></div>
      </section>

      <!-- ç©æ³•å››ï¼šè£…æ»¡ç¯®å­ -->
      <section id="mode-4" class="game-section">
        <div class="top-bar">
          <div>ç©æ³•å››ï¼šè£…æ»¡ç¯®å­</div>
          <div>å½“å‰å¾—åˆ†ï¼š<span id="m4-score">0</span></div>
        </div>
        <div class="board">
          <div class="prompt" id="m4-prompt">è®©ç¯®å­é‡Œåˆšå¥½è£…ä¸‹ 5 ä¸ªå›¾æ¡ˆã€‚</div>
          <div class="basket-box">
            <div class="basket" id="m4-basket"></div>
            <div class="basket-info" id="m4-info">ç°åœ¨ç¯®å­é‡Œæœ‰ 0 ä¸ªã€‚</div>
          </div>
        </div>
        <div class="prompt">ç‚¹å‡»æŒ‰é’®å¾€ç¯®å­é‡Œæ”¾å›¾æ¡ˆæˆ–æ‹¿èµ°ï¼š</div>
        <div style="display:flex; gap:8px; flex-wrap:wrap; margin-bottom:6px;">
          <button class="btn btn-main" id="m4-add">â• æ”¾ä¸€ä¸ª</button>
          <button class="btn btn-ghost" id="m4-remove">â– æ‹¿èµ°ä¸€ä¸ª</button>
          <button class="btn btn-main" id="m4-done">âœ… æˆ‘è§‰å¾—åˆšåˆšå¥½</button>
        </div>
        <div class="feedback" id="m4-feedback"></div>
        <div class="controls">
          <button class="btn btn-ghost" id="m4-restart">ğŸ” æ¢ä¸€é¢˜</button>
          <span style="font-size:13px; color:#9ca3af;">æç¤ºï¼šä¸è¦è¶…è¿‡ï¼Œä¹Ÿä¸è¦å°‘ä¸€ä¸ªï¼Œåˆšåˆšå¥½æœ€æ£’ï¼</span>
        </div>
      </section>

      <!-- ç©æ³•äº”ï¼šæ•°å­—å°è·¯ -->
      <section id="mode-5" class="game-section">
        <div class="top-bar">
          <div>ç©æ³•äº”ï¼šæ•°å­—å°è·¯ï¼ˆæŒ‰é¡ºåºç‚¹æ•°å­—ï¼‰</div>
          <div>ç›®æ ‡ï¼šä» 1 ç‚¹åˆ° 10</div>
        </div>
        <div class="board">
          <div class="prompt" id="m5-prompt">è¯·æŒ‰é¡ºåºç‚¹å‡»æ•°å­—ï¼š1ï¼Œ2ï¼Œ3â€¦â€¦ä¸€ç›´åˆ° 10ã€‚</div>
          <div class="number-path-grid" id="m5-grid"></div>
        </div>
        <div class="feedback" id="m5-feedback"></div>
        <div class="controls">
          <button class="btn btn-ghost" id="m5-restart">ğŸ” é‡æ–°å¼€å§‹</button>
        </div>
      </section>
    </div>
  </div>

  <script>
    // é€šç”¨ï¼šæ¨¡å¼åˆ‡æ¢
    const modeButtons = document.querySelectorAll(".mode-btn");
    const sections = document.querySelectorAll(".game-section");

    function switchMode(mode) {
      modeButtons.forEach(btn => {
        btn.classList.toggle("active", btn.dataset.mode === String(mode));
      });
      sections.forEach(sec => {
        sec.classList.toggle("active", sec.id === "mode-" + mode);
      });
    }

    modeButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        switchMode(btn.dataset.mode);
      });
    });

    // é€šç”¨è¡¨æƒ…é›†
    const baseEmojis = ["ğŸ","ğŸ“","ğŸŒ","ğŸ‡","ğŸ’","ğŸ¶","ğŸš—","â­","ğŸ­","âš½"];

    // ç©æ³•ä¸€ï¼šæ•°ä¸€æ•°
    (function() {
      const scoreEl = document.getElementById("m1-score");
      const gridEl = document.getElementById("m1-grid");
      const numGridEl = document.getElementById("m1-num-grid");
      const feedbackEl = document.getElementById("m1-feedback");
      const nextBtn = document.getElementById("m1-next");
      const restartBtn = document.getElementById("m1-restart");

      let answer = 0;
      let score = 0;
      let answered = false;

      function setupNumButtons() {
        for (let i = 1; i <= 10; i++) {
          const btn = document.createElement("button");
          btn.className = "num-btn";
          btn.textContent = i;
          btn.addEventListener("click", () => handleAnswer(i, btn));
          numGridEl.appendChild(btn);
        }
      }

      function newQuestion() {
        answered = false;
        feedbackEl.textContent = "";
        feedbackEl.className = "feedback";
        nextBtn.disabled = true;
        gridEl.innerHTML = "";
        const num = Math.floor(Math.random() * 10) + 1;
        const emoji = baseEmojis[Math.floor(Math.random() * baseEmojis.length)];
        answer = num;
        for (let i = 0; i < num; i++) {
          const span = document.createElement("span");
          span.textContent = emoji;
          gridEl.appendChild(span);
        }
        resetButtons();
      }

      function resetButtons() {
        const buttons = numGridEl.querySelectorAll(".num-btn");
        buttons.forEach(btn => {
          btn.disabled = false;
          btn.classList.remove("correct","wrong");
        });
      }

      function handleAnswer(val, btn) {
        if (answered) return;
        answered = true;
        const buttons = numGridEl.querySelectorAll(".num-btn");
        buttons.forEach(b => b.disabled = true);
        if (val === answer) {
          btn.classList.add("correct");
          feedbackEl.textContent = "âœ… æ•°å¾—å¾ˆè®¤çœŸï¼Œå®Œå…¨æ­£ç¡®ï¼";
          feedbackEl.classList.add("ok");
          score += 10;
        } else {
          btn.classList.add("wrong");
          feedbackEl.textContent = `âŒ å†æ•°ä¸€æ•°ï¼Ÿè¿™æ¬¡çš„æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${answer}ã€‚`;
          feedbackEl.classList.add("bad");
        }
        scoreEl.textContent = score;
        nextBtn.disabled = false;
      }

      nextBtn.addEventListener("click", newQuestion);
      restartBtn.addEventListener("click", () => {
        score = 0;
        scoreEl.textContent = score;
        newQuestion();
      });

      setupNumButtons();
      newQuestion();
    })();

    // ç©æ³•äºŒï¼šåªæ•°ç›®æ ‡å›¾æ¡ˆ
    (function() {
      const scoreEl = document.getElementById("m2-score");
      const gridEl = document.getElementById("m2-grid");
      const numGridEl = document.getElementById("m2-num-grid");
      const feedbackEl = document.getElementById("m2-feedback");
      const nextBtn = document.getElementById("m2-next");
      const restartBtn = document.getElementById("m2-restart");
      const promptEl = document.getElementById("m2-prompt");

      let answer = 0;
      let targetEmoji = "ğŸ¶";
      let score = 0;
      let answered = false;

      function setupNumButtons() {
        for (let i = 1; i <= 10; i++) {
          const btn = document.createElement("button");
          btn.className = "num-btn";
          btn.textContent = i;
          btn.addEventListener("click", () => handleAnswer(i, btn));
          numGridEl.appendChild(btn);
        }
      }

      function newQuestion() {
        answered = false;
        feedbackEl.textContent = "";
        feedbackEl.className = "feedback";
        nextBtn.disabled = true;
        gridEl.innerHTML = "";
        // é€‰ä¸€ä¸ªç›®æ ‡å›¾æ¡ˆ
        targetEmoji = baseEmojis[Math.floor(Math.random() * baseEmojis.length)];
        const total = Math.floor(Math.random() * 6) + 6; // æ€»æ•° 6~11
        let targetCount = Math.floor(Math.random() * 5) + 1; // ç›®æ ‡ 1~5
        if (targetCount > total) targetCount = Math.floor(total/2) || 1;
        answer = targetCount;
        const arr = [];
        for (let i = 0; i < targetCount; i++) arr.push(targetEmoji);
        while (arr.length < total) {
          let e = baseEmojis[Math.floor(Math.random() * baseEmojis.length)];
          if (e === targetEmoji) continue; // é¿å…ç›®æ ‡æ•°é‡è¢«ç ´å
          arr.push(e);
        }
        // æ‰“ä¹±
        arr.sort(() => Math.random() - 0.5);
        arr.forEach(e => {
          const span = document.createElement("span");
          span.textContent = e;
          gridEl.appendChild(span);
        });
        promptEl.textContent = `ä»»åŠ¡ï¼šåªæ•°å‡ºæœ‰å¤šå°‘ä¸ª ${targetEmoji}ï¼Ÿ`;
        resetButtons();
      }

      function resetButtons() {
        const buttons = numGridEl.querySelectorAll(".num-btn");
        buttons.forEach(btn => {
          btn.disabled = false;
          btn.classList.remove("correct","wrong");
        });
      }

      function handleAnswer(val, btn) {
        if (answered) return;
        answered = true;
        const buttons = numGridEl.querySelectorAll(".num-btn");
        buttons.forEach(b => b.disabled = true);
        if (val === answer) {
          btn.classList.add("correct");
          feedbackEl.textContent = "âœ… å¤ªæ£’äº†ï¼ä½ åªæ•°ç›®æ ‡å›¾æ¡ˆä¹Ÿè¿™ä¹ˆå‡†ï¼";
          feedbackEl.classList.add("ok");
          score += 10;
        } else {
          btn.classList.add("wrong");
          feedbackEl.textContent = `âŒ è¿™æ¬¡ä¸€å…±æœ‰ ${answer} ä¸ª ${targetEmoji}ï¼Œæˆ‘ä»¬å†æ¥ä¸€é¢˜è¯•è¯•ï¼Ÿ`;
          feedbackEl.classList.add("bad");
        }
        scoreEl.textContent = score;
        nextBtn.disabled = false;
      }

      nextBtn.addEventListener("click", newQuestion);
      restartBtn.addEventListener("click", () => {
        score = 0;
        scoreEl.textContent = score;
        newQuestion();
      });

      setupNumButtons();
      newQuestion();
    })();

    // ç©æ³•ä¸‰ï¼šè°æ›´å¤šï¼Ÿ
    (function() {
      const scoreEl = document.getElementById("m3-score");
      const leftEl = document.getElementById("m3-left");
      const rightEl = document.getElementById("m3-right");
      const feedbackEl = document.getElementById("m3-feedback");
      const nextBtn = document.getElementById("m3-next");
      const restartBtn = document.getElementById("m3-restart");
      const summaryEl = document.getElementById("m3-summary");
      const btnLeft = document.getElementById("m3-choose-left");
      const btnRight = document.getElementById("m3-choose-right");
      const promptEl = document.getElementById("m3-prompt");

      let leftCount = 0;
      let rightCount = 0;
      let score = 0;
      let answered = false;

      function newQuestion() {
        answered = false;
        feedbackEl.textContent = "";
        feedbackEl.className = "feedback";
        nextBtn.disabled = true;
        summaryEl.style.display = "none";
        leftEl.innerHTML = "";
        rightEl.innerHTML = "";

        const emoji = baseEmojis[Math.floor(Math.random() * baseEmojis.length)];
        leftCount = Math.floor(Math.random() * 6) + 3;  // 3~8
        rightCount = Math.floor(Math.random() * 6) + 3;
        while (leftCount === rightCount) {
          rightCount = Math.floor(Math.random() * 6) + 3;
        }

        for (let i = 0; i < leftCount; i++) {
          const span = document.createElement("span");
          span.textContent = emoji;
          leftEl.appendChild(span);
        }
        for (let i = 0; i < rightCount; i++) {
          const span = document.createElement("span");
          span.textContent = emoji;
          rightEl.appendChild(span);
        }
        promptEl.textContent = "å“ªä¸€è¾¹çš„å›¾æ¡ˆæ›´å¤šï¼Ÿç‚¹å·¦è¾¹æˆ–å³è¾¹ã€‚";
        btnLeft.disabled = false;
        btnRight.disabled = false;
      }

      function handleChoice(side) {
        if (answered) return;
        answered = true;
        btnLeft.disabled = true;
        btnRight.disabled = true;

        const diff = Math.abs(leftCount - rightCount);
        const correctSide = leftCount > rightCount ? "left" : "right";

        if (side === correctSide) {
          feedbackEl.textContent = `âœ… å¾ˆæ£’ï¼ä½ çœ‹å‡ºæ¥å“ªä¸€è¾¹æ›´å¤šå•¦ã€‚å¤šäº† ${diff} ä¸ªã€‚`;
          feedbackEl.classList.add("ok");
          score += 10;
        } else {
          const tip = leftCount > rightCount ? "å·¦è¾¹" : "å³è¾¹";
          feedbackEl.textContent = `âŒ è¿™æ¬¡å…¶å®æ˜¯ ${tip} æ›´å¤šå“¦ï¼Œä¸€å…±å¤š ${diff} ä¸ªã€‚`;
          feedbackEl.classList.add("bad");
        }
        scoreEl.textContent = score;
        nextBtn.disabled = false;

        summaryEl.style.display = "block";
        summaryEl.textContent = `å·¦è¾¹ï¼š${leftCount} ä¸ªï¼Œå³è¾¹ï¼š${rightCount} ä¸ªã€‚`;
      }

      btnLeft.addEventListener("click", () => handleChoice("left"));
      btnRight.addEventListener("click", () => handleChoice("right"));
      nextBtn.addEventListener("click", newQuestion);
      restartBtn.addEventListener("click", () => {
        score = 0;
        scoreEl.textContent = score;
        newQuestion();
      });

      newQuestion();
    })();

    // ç©æ³•å››ï¼šè£…æ»¡ç¯®å­
    (function() {
      const scoreEl = document.getElementById("m4-score");
      const basketEl = document.getElementById("m4-basket");
      const infoEl = document.getElementById("m4-info");
      const promptEl = document.getElementById("m4-prompt");
      const feedbackEl = document.getElementById("m4-feedback");
      const btnAdd = document.getElementById("m4-add");
      const btnRemove = document.getElementById("m4-remove");
      const btnDone = document.getElementById("m4-done");
      const restartBtn = document.getElementById("m4-restart");

      let target = 5;
      let current = 0;
      let emoji = "ğŸ“";
      let score = 0;

      function renderBasket() {
        basketEl.innerHTML = "";
        for (let i = 0; i < current; i++) {
          const span = document.createElement("span");
          span.textContent = emoji;
          basketEl.appendChild(span);
        }
        infoEl.textContent = `ç°åœ¨ç¯®å­é‡Œæœ‰ ${current} ä¸ªã€‚`;
      }

      function newQuestion() {
        feedbackEl.textContent = "";
        feedbackEl.className = "feedback";
        target = Math.floor(Math.random() * 5) + 3; // 3~7
        emoji = baseEmojis[Math.floor(Math.random() * baseEmojis.length)];
        current = 0;
        promptEl.textContent = `è®©ç¯®å­é‡Œåˆšå¥½è£…ä¸‹ ${target} ä¸ª ${emoji}ã€‚`;
        renderBasket();
      }

      btnAdd.addEventListener("click", () => {
        if (current < 12) {
          current++;
          renderBasket();
        }
      });

      btnRemove.addEventListener("click", () => {
        if (current > 0) {
          current--;
          renderBasket();
        }
      });

      btnDone.addEventListener("click", () => {
        feedbackEl.textContent = "";
        feedbackEl.className = "feedback";
        if (current === target) {
          feedbackEl.textContent = "âœ… åˆšåˆšå¥½ï¼ä½ å¯¹æ•°é‡çš„æ„Ÿè§‰å¾ˆæ£’ï¼";
          feedbackEl.classList.add("ok");
          score += 10;
        } else if (current > target) {
          feedbackEl.textContent = `ğŸ˜… æœ‰ç‚¹å¤šå•¦ï¼Œå¤šäº† ${current - target} ä¸ªï¼Œå†è¯•ä¸€é¢˜å§ã€‚`;
          feedbackEl.classList.add("bad");
        } else {
          feedbackEl.textContent = `ğŸ™‚ è¿˜æœ‰ç‚¹å°‘ï¼Œå·® ${target - current} ä¸ªã€‚ä¸‹æ¬¡ä¸€å®šå¯ä»¥è£…åˆšåˆšå¥½ã€‚`;
          feedbackEl.classList.add("bad");
        }
        scoreEl.textContent = score;
      });

      restartBtn.addEventListener("click", () => {
        score = 0;
        scoreEl.textContent = score;
        newQuestion();
      });

      newQuestion();
    })();

    // ç©æ³•äº”ï¼šæ•°å­—å°è·¯
    (function() {
      const gridEl = document.getElementById("m5-grid");
      const feedbackEl = document.getElementById("m5-feedback");
      const promptEl = document.getElementById("m5-prompt");
      const restartBtn = document.getElementById("m5-restart");

      let next = 1;

      function newGame() {
        gridEl.innerHTML = "";
        feedbackEl.textContent = "";
        feedbackEl.className = "feedback";
        next = 1;
        const nums = [];
        for (let i = 1; i <= 10; i++) nums.push(i);
        nums.sort(() => Math.random() - 0.5);
        nums.forEach(n => {
          const btn = document.createElement("button");
          btn.className = "path-btn";
          btn.textContent = n;
          btn.addEventListener("click", () => handleClick(n, btn));
          gridEl.appendChild(btn);
        });
        promptEl.textContent = "è¯·æŒ‰é¡ºåºç‚¹å‡»æ•°å­—ï¼š1ï¼Œ2ï¼Œ3â€¦â€¦ä¸€ç›´åˆ° 10ã€‚";
      }

      function handleClick(n, btn) {
        if (n === next) {
          btn.classList.add("done");
          btn.disabled = true;
          if (next === 10) {
            feedbackEl.textContent = "ğŸ‰ å¤ªæ£’äº†ï¼ä½ å·²ç»æŒ‰é¡ºåºèµ°å®Œæ•°å­—å°è·¯ï¼";
            feedbackEl.classList.add("ok");
          } else {
            next++;
            feedbackEl.textContent = `å¾ˆå¥½ï¼ä¸‹ä¸€ä¸ªè¦æ‰¾çš„æ•°å­—æ˜¯ï¼š${next}`;
            feedbackEl.className = "feedback ok";
          }
        } else {
          feedbackEl.textContent = `è¿™è¿˜ä¸æ˜¯è¦æ‰¾çš„é‚£ä¸ªæ•°å­—å“¦ï¼Œç°åœ¨è¦æ‰¾çš„æ˜¯ï¼š${next}`;
          feedbackEl.className = "feedback bad";
          btn.classList.add("wrong");
          setTimeout(() => btn.classList.remove("wrong"), 300);
        }
      }

      restartBtn.addEventListener("click", newGame);
      newGame();
    })();
  </script>
</body>
</html>
